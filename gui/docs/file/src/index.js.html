<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/index.js | @artonline/node</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="ArtOnline Node GUI"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@artonline/node"><meta property="twitter:description" content="ArtOnline Node GUI"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  </ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/index.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import { app, BrowserWindow } from &apos;electron&apos;
import path from &apos;path&apos;

// Handle creating/removing shortcuts on Windows when installing/uninstalling.
if (require(&apos;electron-squirrel-startup&apos;)) { app.quit() }

const handleSquirrelEvent = () =&gt; {
  if (process.argv.length === 1) {
    return false;
  }

  const ChildProcess = require(&apos;child_process&apos;);
  const path = require(&apos;path&apos;);

  const appFolder = path.resolve(process.execPath, &apos;..&apos;);
  const rootAtomFolder = path.resolve(appFolder, &apos;..&apos;);
  const updateDotExe = path.resolve(path.join(rootAtomFolder, &apos;Update.exe&apos;));
  const exeName = path.basename(process.execPath);

  const spawn = function(command, args) {
    let spawnedProcess, error;

    try {
      spawnedProcess = ChildProcess.spawn(command, args, {detached: true});
    } catch (error) {}

    return spawnedProcess;
  };

  const spawnUpdate = function(args) {
    return spawn(updateDotExe, args);
  };

  const squirrelEvent = process.argv[1];
  switch (squirrelEvent) {
    case &apos;--squirrel-install&apos;:
    case &apos;--squirrel-updated&apos;:
      // Optionally do things such as:
      // - Add your .exe to the PATH
      // - Write to the registry for things like file associations and
      //   explorer context menus

      // Install desktop and start menu shortcuts
      spawnUpdate([&apos;--createShortcut&apos;, exeName]);

      setTimeout(app.quit, 1000);
      return true;

    case &apos;--squirrel-uninstall&apos;:
      // Undo anything you did in the --squirrel-install and
      // --squirrel-updated handlers

      // Remove desktop and start menu shortcuts
      spawnUpdate([&apos;--removeShortcut&apos;, exeName]);

      setTimeout(app.quit, 1000);
      return true;

    case &apos;--squirrel-obsolete&apos;:
      // This is called on the outgoing version of your app before
      // we update to the new version - it&apos;s the opposite of
      // --squirrel-updated

      app.quit();
      return true;
  }
}
if (handleSquirrelEvent()) {} else {
  const createWindow = () =&gt; {
    // Create the browser window.
    const mainWindow = new BrowserWindow({
      width: 800,
      height: 600,
      webPreferences: {
        nodeIntegrationInWorker: true
      }
    });

    // and load the index.html of the app.
    mainWindow.loadFile(path.join(__dirname, &apos;index.html&apos;));

    // Open the DevTools.
    mainWindow.webContents.openDevTools();
  };

  // This method will be called when Electron has finished
  // initialization and is ready to create browser windows.
  // Some APIs can only be used after this event occurs.
  app.on(&apos;ready&apos;, createWindow);

  // Quit when all windows are closed, except on macOS. There, it&apos;s common
  // for applications and their menu bar to stay active until the user quits
  // explicitly with Cmd + Q.
  app.on(&apos;window-all-closed&apos;, () =&gt; {
    if (process.platform !== &apos;darwin&apos;) {
      app.quit();
    }
  });

  app.on(&apos;activate&apos;, () =&gt; {
    // On OS X it&apos;s common to re-create a window in the app when the
    // dock icon is clicked and there are no other windows open.
    if (BrowserWindow.getAllWindows().length === 0) {
      createWindow();
    }
  });
}



// In this file you can include the rest of your app&apos;s specific main process
// code. You can also put them in separate files and import them here.
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
